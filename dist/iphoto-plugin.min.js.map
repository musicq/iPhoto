{"version":3,"sources":["iphoto-plugin.js"],"names":["$","DIRECTION","WIN_W","WIN_H","DISTANCE","GAP","$window","window","PHOTO_POP_HOLDER","document","PHOTO_POP_HOLDER_SEL","PHOTO_POP","PHOTO_POP_SEL","POP_IMG","POP_IMG_SEL","IMG_HOLD","on","width","height","fn","iPhoto","options","init_iphoto","timer","MOUSEMOVE","$Container","e","showPic","removeiphoto","event","$target","target","srcElement","viewType","afterSelected","clearTimeout","setTimeout","off","hasClass","src","css","replace","img","Image","onload","z_w","z_h","scaleImgObj","imgScale","iphotoPopUp","extend","defaults","this","length","CUS_MAX_WIDTH","CUS_MAX_HEIGHT","size","scale","the_MAX_WIDTH","MAX_WIDTH","the_MAX_HEIGHT","MAX_HEIGHT","getMousePoint","point","x","y","pageYOffset","pageXOffset","compatMode","documentElement","scrollLeft","scrollTop","body","clientX","clientY","type","callback","index","data","fadeOut","remove","z_x","z_y","gap","p","m_x","m_y","undefined","position","left","top","parent","tar_left","tar_top","tar_w","tar_h","$ihold","$ipop","find","attr","appendTo","hide","fadeIn","noop","jQuery"],"mappings":"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","file":"iphoto-plugin.min.js","sourcesContent":["/*!\n * iPhoto 0.1.0\n *\n * Github https://github.com/musicq/iphoto\n * @license MIT licensed\n * Copyright (C) 2015 musicq.github.io\n */\n;(function($) {\n  \"use strict\";\n  /**\n   * @[DISTANCE]     定义一个距离，用来控制放大图与原图间的距离\n   * @[GAP]          定义一个间隙，用来限制大图距离窗口 上、下、左、右 的最小距离\n   * @[DIRECTION]    定义一个方向 用来指定放大图的显示方向\n   * @[WIN_W]        窗口宽度\n   * @[WIN_H]        窗口高度\n   */\n  var DISTANCE = 15,\n      GAP = 10,\n      DIRECTION,\n      WIN_W,\n      WIN_H;\n\n  var $window = $(window),\n      $document = $(document);\n\n  // 选择元素\n  var PHOTO_POP_HOLDER = 'iphoto-pop-holder',\n      PHOTO_POP_HOLDER_SEL = '.' + PHOTO_POP_HOLDER,\n\n      PHOTO_POP = 'iphoto-pop',\n      PHOTO_POP_SEL = '.' + PHOTO_POP,\n\n      POP_IMG = 'pop-img',\n      POP_IMG_SEL = '.' + POP_IMG,\n\n      IMG_HOLD = 'img-hold',\n      IMG_HOLD_SEL = '.' + IMG_HOLD;\n\n\n  // 窗口 resize 后，重新获取窗口宽高\n  $window.on('resize', function() {\n    WIN_W = $window.width();\n    WIN_H = $window.height();\n  });\n\n\n  $.fn.iPhoto = function(options) {\n\n    options = $.extend({}, $.fn.iPhoto.defaults, options);\n\n    // $Container 需要使用 iphoto 的元素 id\n    var $Container = $(this);\n\n    if($Container.length) init_iphoto();\n\n    /**\n     * 图片等比例缩放\n     * @param {Number} width           需要进行等比例缩放图片的真实宽\n     * @param {Number} height          需要进行等比例缩放图片的真实高\n     * @param {Number} CUS_MAX_WIDTH  「可选」自定义缩放最大宽度，如 200，怎缩放最大宽度不超过 200px; 若不填，则默认为 MAX_WIDTH\n     * @param {Number} CUS_MAX_HEIGHT 「可选」自定义缩放最大高度，如 200，怎缩放最大高度不超过 200px; 若不填，则默认为 MAX_HEIGHT\n     * @returns {object} size          返回一个 object，包含有缩放后的宽和高\n     */\n    $.fn.iPhoto.imgScale = function(width, height, CUS_MAX_WIDTH, CUS_MAX_HEIGHT) {\n      var size = {},\n          scale = width/height,\n          //the_MAX_WIDTH = typeof(CUS_MAX_WIDTH) == 'undefined' ? MAX_WIDTH : CUS_MAX_WIDTH,\n          //the_MAX_HEIGHT = typeof(CUS_MAX_HEIGHT) == 'undefined' ? MAX_HEIGHT : CUS_MAX_HEIGHT;\n          the_MAX_WIDTH = CUS_MAX_WIDTH || options.MAX_WIDTH,\n          the_MAX_HEIGHT = CUS_MAX_HEIGHT || options.MAX_HEIGHT;\n\n      if(scale > 1) {\n        scale = the_MAX_WIDTH/width;\n        width = the_MAX_WIDTH; // width = width * scale  -> the_MAX_WIDTH\n        height = height * scale;\n      } else {\n        scale = the_MAX_HEIGHT/height;\n        width = width * scale;\n        height = the_MAX_HEIGHT;\n      }\n\n      size.width = width;\n      size.height = height;\n\n      return size;\n    }\n\n    /**\n     * [获取鼠标在页面上的位置] 「摘自网上」\n     * @param  {[event]}  e       [事件]\n     * @return {[object]} point   [x:鼠标在页面上的横向位置 y:鼠标在页面上的纵向位置]\n     */\n    $.fn.iPhoto.getMousePoint = function(e) {\n      // 定义鼠标在视窗中的位置\n      var point = {\n        x:0,\n        y:0\n      };\n\n      // 如果浏览器支持 pageYOffset, 通过 pageXOffset 和 pageYOffset 获取页面和视窗之间的距离\n      if(typeof window.pageYOffset !== 'undefined') {\n        point.x = window.pageXOffset;\n        point.y = window.pageYOffset;\n      }\n      // 如果浏览器支持 compatMode, 并且指定了 DOCTYPE, 通过 documentElement 获取滚动距离作为页面和视窗间的距离\n      // IE 中, 当页面指定 DOCTYPE, compatMode 的值是 CSS1Compat, 否则 compatMode 的值是 BackCompat\n      else if(typeof document.compatMode !== 'undefined' && document.compatMode !== 'BackCompat') {\n        point.x = document.documentElement.scrollLeft;\n        point.y = document.documentElement.scrollTop;\n      }\n      // 如果浏览器支持 document.body, 可以通过 document.body 来获取滚动高度\n      else if(typeof document.body !== 'undefined') {\n        point.x = document.body.scrollLeft;\n        point.y = document.body.scrollTop;\n      }\n\n      // 加上鼠标在视窗中的位置\n      point.x += e.clientX;\n      point.y += e.clientY;\n\n      // 返回鼠标在视窗中的位置\n      return point;\n    }\n\n    /**\n     * [视图显示函数]\n     * @param  {[string]}   type       [显示视图类型，'YEAR','MONTH','DAY','PHOTO']\n     * @param  {[object]}   $target    [目标元素的 jquery 对象]\n     * @param  {Function}   callback   [回调函数]\n     */\n    $.fn.iPhoto.viewType = function( type, $target, callback ) {\n      switch (type) {\n        case 'YEAR':\n          // 显示年视图\n          break;\n        case 'MONTH':\n          // 显示月视图\n          break;\n        case 'DAY':\n          // 显示日视图\n          break;\n        case 'PHOTO':\n          // 显示详细视图\n          var index = $target.data('index');\n          callback($target, index);\n          break;\n        default:\n          // 显示年视图\n      }\n    }\n\n    /**\n     * 移除 pop 层\n     */\n    $.fn.iPhoto.removeiphoto = function() {\n      $(PHOTO_POP_HOLDER_SEL).fadeOut(150, function() {\n        $(PHOTO_POP_HOLDER_SEL).remove();\n      });\n    }\n\n    /**\n     * [弹出 pop 层]\n     * @param  {[object]} $target [目标元素的 jquery 对象]\n     * @param  {[string]} src     [图片源]\n     * @param  {[number]} z_w     [图片缩放后的宽度]\n     * @param  {[number]} z_h     [图片缩放后的高度]\n     * @param  {[event]} e        [传入鼠标事件]\n     */\n    $.fn.iPhoto.iphotoPopUp = function( $target, src, z_w, z_h, e ) {\n\n     // @[z_x] 放大图片的 x 坐标\n     // @[z_y] 放大图片的 y 坐标\n     // @[gap] 放大图片距离窗口的距离\n      var z_x,\n          z_y,\n          gap;\n\n      // 直接显示一个 pop\n      if( !e ) {\n        // 如果没有事件传入，即直接 pop 一个图片\n        var scaleImgObj = $.fn.iPhoto.imgScale(z_w, z_h);\n        z_w = scaleImgObj.width;\n        z_h = scaleImgObj.height;\n\n        $target = $target.hasClass('img-hold') ? $target.parent('.list-item') : $target;\n\n        var tar_left = $target.position().left,\n            tar_top = $target.position().top,\n            tar_w = $target.width(),\n            tar_h = $target.height();\n\n          /* 计算 pop 层的位置 */\n          // 计算距离窗口距离\n          gap = tar_top - z_h - DISTANCE; // 初始 gap 是距离上部\n\n          // 如果 gap 小于最小间隔，则将其设置成距离下方的计算\n          if( gap > GAP ) {\n            z_y = tar_top - z_h - DISTANCE;\n            z_x = (tar_left + tar_w/2) - z_w/2;\n          } else {\n            z_y = tar_top + tar_h + DISTANCE;\n            z_x = (tar_left + tar_w/2) - z_w/2;\n          }\n\n      } else {\n\n        var p = $.fn.iPhoto.getMousePoint(e),\n            m_x = p.x,\n            m_y = p.y;\n\n        if(z_w === undefined && z_h === undefined && e === undefined) {\n          m_x = $target.position().left;\n          m_y = $target.position().top;\n        }\n\n        /* 计算 pop 层的位置 */\n        // 初始的 DIRECTION 是没有值的，通过计算图片出现的位置与 gap 的间距，来得出这张图应该出现在鼠标上方，还是鼠标下方\n        if(DIRECTION === undefined || DIRECTION === null || DIRECTION === '') {\n          gap = e.clientY - z_h - DISTANCE;\n          if( gap < GAP ) {\n            gap = WIN_H - (e.clientY + z_h + DISTANCE);\n            DIRECTION = 'down';\n          } else {\n            DIRECTION = 'up';\n          }\n        }\n        // 注意：这里使用 e.clientY 而不是 m_y 是因为 m_y 是根据文档计算出来的高，而 e.clientY 则是相对于屏幕的高度\n        if(DIRECTION == 'up') {\n          gap = e.clientY - z_h - DISTANCE; // 初始 gap 是距离上部\n          z_x = m_x - z_w/2;\n          z_y = m_y - z_h - DISTANCE;\n          // 若检测到 gap 距离窗口顶部小于定义距离，则更换图片出现方向，并更换 gap 计算方法适用于 「下」\n          if( gap < GAP ) {\n            gap = WIN_H - (e.clientY + z_h + DISTANCE);\n            DIRECTION = 'down';\n          }\n        } else if(DIRECTION == 'down') {\n          gap = WIN_H - (e.clientY + z_h + DISTANCE);\n          z_x = m_x - z_w/2;\n          z_y = m_y + DISTANCE;\n          // 若检测到 gap 距离窗口底部小于定义距离，则更换图片出现方向，并更换 gap 计算方法适用于 「上」\n          if( gap < GAP ) {\n            gap = e.clientY - z_h - DISTANCE; // 初始 gap 是距离上部\n            DIRECTION = 'up';\n          }\n        }\n      \n      }\n\n\n      // 如果距离窗口左边小于 GAP，则设为距离左边GAP；如果距离窗口右边小于 GAP，则设为距离右边 GAP\n      if( z_x < GAP ) {\n        z_x = GAP;\n      } else if ( (WIN_W - ( z_x + z_w )) < GAP ) {\n        z_x = WIN_W - z_w - GAP;\n      }\n\n      // pop 放大图模板\n      if($(PHOTO_POP_HOLDER_SEL).length) {\n        var $ihold = $(PHOTO_POP_HOLDER_SEL),\n            $ipop = $ihold.find(PHOTO_POP_SEL);\n\n        $ipop\n          .data('index', $target.data('index'))\n          .css({\n            top: z_y,\n            left: z_x,\n            width: z_w,\n            height: z_h\n          });\n        $ipop.find(POP_IMG_SEL).attr('src', src);\n      } else {\n        $('<div class=\"iphoto-pop-holder\"><div class=\"iphoto-pop\" data-index= \"'+$target.data('index')+'\" style=\"top: '+z_y+'px; left: '+z_x+'px; width: '+z_w+'px; height: '+z_h+'px;\"><img class=\"pop-img\" src=\"'+src+'\" alt=\"\" /></div></div>')\n          .appendTo($('body'))\n          .hide()\n          .fadeIn(150);\n      }\n     \n    }\n\n    /**\n     * iphoto 程序入口函数\n     */\n    function init_iphoto() {\n      var timer = null; // 滞空一个定时器\n\n      if(!options.MOUSEMOVE) {\n        // 鼠标按下\n        $Container.on('mousedown', function(e) {\n          // 初始化 pop 层方向\n          DIRECTION = '';\n          WIN_W = $window.width();\n          WIN_H = $window.height();\n\n          // 开启一个定时器\n          clearTimeout(timer);\n          timer = setTimeout(function() {\n            showPic(e);\n          }, 1000);\n\n          $Container.on('mousemove', function(e) {\n            showPic(e);\n            // 若鼠标进入了 pop 层，则会将 pop remove掉\n            $(PHOTO_POP_HOLDER_SEL).on('mouseenter', function(e) {\n              $.fn.iPhoto.removeiphoto();\n            });\n            if(timer) clearTimeout(timer);\n          });\n        });\n        \n        // 鼠标抬起\n        $Container.on('mouseup', function(e) {\n          // 移除 mousemove 事件\n          $Container.off('mousemove');\n\n          e = e || window.event;\n          var $target = $((e.target || e.srcElement));\n\n          clearTimeout(timer);\n\n          if(!$target.hasClass(IMG_HOLD) || !$target) {\n            $.fn.iPhoto.removeiphoto(); // 控制鼠标停留在空白处时，将 pop 层 remove 掉\n            return false;\n          }\n          \n          $.fn.iPhoto.removeiphoto();\n\n          $.fn.iPhoto.viewType( 'PHOTO', $target, options.afterSelected );\n        });\n\n      } else {\n        DIRECTION = '';\n\n        $Container.on('mousemove', function(e) {\n          WIN_W = $window.width();\n          WIN_H = $window.height();\n          // 传入图片 src 处理方法\n          showPic(e);\n          // 若鼠标进入了 pop 层，则会将 pop remove掉\n          $(PHOTO_POP_HOLDER_SEL).on('mouseenter', function(e) {\n            $.fn.iPhoto.removeiphoto();\n          });\n        });\n\n        $Container.on('click', function(e) {\n          e = e || window.event;\n          var $target = $((e.target || e.srcElement));\n          $.fn.iPhoto.removeiphoto();\n\n          $.fn.iPhoto.viewType( 'PHOTO', $target, options.afterSelected );\n        });\n      }\n    }\n\n    /**\n     * 显示放大图片\n     * @param {event} e 鼠标事件\n     */\n    function showPic (e) {\n      e = e || window.event;\n      var $target = $((e.target || e.srcElement));\n\n      // 如果不是指定位置，则 remove 掉所有 pop 层，并返回\n      if(!$target.hasClass(IMG_HOLD) || !$target) {\n        // 控制鼠标停留在空白处时，将 pop 层 remove 掉\n        $.fn.iPhoto.removeiphoto();\n        return false;\n      }\n\n      src = $target.css('background-image').replace(/^url|[\\(\\)]/g, ''); // 得到背景图片，并处理掉 url()\n\n      var img = new Image();\n      img.src = src;\n      img.onload = function () {\n        // 得到图片的真实宽、高\n        var z_w = img.width,\n            z_h = img.height;\n\n        // 等比例缩放图片\n        var scaleImgObj = $.fn.iPhoto.imgScale(z_w, z_h);\n        z_w = scaleImgObj.width;\n        z_h = scaleImgObj.height;\n\n        // 弹出 pop 层\n        $.fn.iPhoto.iphotoPopUp($target, src, z_w, z_h, e);\n      };\n    }\n\n  }\n\n\n  /**\n   * 配置项\n   * @[MAX_WIDTH]                  用来限制放大图片最大的宽度，默认 200px\n   * @[MAX_HEIGHT]                 用来限制放大图片的最大高度，默认 200px\n   * @[MOUSEMOVE]                  定义一个鼠标事件，是否使用 mousemove 事件来运行程序，还是需要鼠标按住运行程序\n   * @[DIRECTION]                  定义一个方向 用来指定放大图的显示方向\n   * @[WIN_W]                      窗口宽度\n   * @[WIN_H]                      窗口高度\n   * @[afterSelected] {function}   在 鼠标点击 或者 鼠标抬起 时触发，两个参数\n   *   @param el                   当前元素\n   *   @param index                当前元素的索引，这个需要自己在生成图片时自己添加到 `data-index` 中\n   */\n  $.fn.iPhoto.defaults = {\n    MAX_WIDTH : 200,\n    MAX_HEIGHT : 200,\n    MOUSEMOVE : false,\n    afterSelected: $.noop,\n  };\n\n})(jQuery);"],"sourceRoot":"/source/"}