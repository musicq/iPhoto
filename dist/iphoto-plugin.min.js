/*!
 * iPhoto 1.0.0
 * 
 * @license MIT licensed
 * Copyright (C) 2015 musicq.github.io
 */
!function(o){"use strict";var e,t,i,n=15,d=10,c=o(window),a=(o(document),"iphoto-pop-holder"),h="."+a,f="iphoto-pop",r="."+f,s="pop-img",l="."+s,p="img-hold";c.on("resize",function(){t=c.width(),i=c.height()}),o.fn.iPhoto=function(a){function f(){var n=null;a.MOUSEMOVE?(e="",u.on("mousemove",function(e){t=c.width(),i=c.height(),s(e),o(h).on("mouseenter",function(e){o.fn.iPhoto.removeiphoto()})}),u.on("click",function(e){e=e||window.event;var t=o(e.target||e.srcElement);o.fn.iPhoto.removeiphoto(),o.fn.iPhoto.viewType("PHOTO",t,a.afterSelected)})):(u.on("mousedown",function(d){e="",t=c.width(),i=c.height(),clearTimeout(n),n=setTimeout(function(){s(d)},1e3),u.on("mousemove",function(e){s(e),o(h).on("mouseenter",function(e){o.fn.iPhoto.removeiphoto()}),n&&clearTimeout(n)})}),u.on("mouseup",function(e){u.off("mousemove"),e=e||window.event;var t=o(e.target||e.srcElement);return clearTimeout(n),t.hasClass(p)&&t?(o.fn.iPhoto.removeiphoto(),void o.fn.iPhoto.viewType("PHOTO",t,a.afterSelected)):(o.fn.iPhoto.removeiphoto(),!1)}))}function s(e){e=e||window.event;var t=o(e.target||e.srcElement);if(!t.hasClass(p)||!t)return o.fn.iPhoto.removeiphoto(),!1;src=t.css("background-image").replace(/^url|[\(\)]/g,"");var i=new Image;i.src=src,i.onload=function(){var n=i.width,d=i.height,c=o.fn.iPhoto.imgScale(n,d);n=c.width,d=c.height,o.fn.iPhoto.iphotoPopUp(t,src,n,d,e)}}a=o.extend({},o.fn.iPhoto.defaults,a);var u=o(this);u.length&&f(),o.fn.iPhoto.imgScale=function(o,e,t,i){var n={},d=o/e,c=t||a.MAX_WIDTH,h=i||a.MAX_HEIGHT;return d>1?(d=c/o,o=c,e*=d):(d=h/e,o*=d,e=h),n.width=o,n.height=e,n},o.fn.iPhoto.getMousePoint=function(o){var e={x:0,y:0};return"undefined"!=typeof window.pageYOffset?(e.x=window.pageXOffset,e.y=window.pageYOffset):"undefined"!=typeof document.compatMode&&"BackCompat"!==document.compatMode?(e.x=document.documentElement.scrollLeft,e.y=document.documentElement.scrollTop):"undefined"!=typeof document.body&&(e.x=document.body.scrollLeft,e.y=document.body.scrollTop),e.x+=o.clientX,e.y+=o.clientY,e},o.fn.iPhoto.viewType=function(o,e,t){switch(o){case"YEAR":break;case"MONTH":break;case"DAY":break;case"PHOTO":var i=e.data("index");t(e,i)}},o.fn.iPhoto.removeiphoto=function(){o(h).fadeOut(150,function(){o(h).remove()})},o.fn.iPhoto.iphotoPopUp=function(c,a,f,s,p){var u,m,v;if(p){var g=o.fn.iPhoto.getMousePoint(p),w=g.x,P=g.y;void 0===f&&void 0===s&&void 0===p&&(w=c.position().left,P=c.position().top),(void 0===e||null===e||""===e)&&(v=p.clientY-s-n,d>v?(v=i-(p.clientY+s+n),e="down"):e="up"),"up"==e?(v=p.clientY-s-n,u=w-f/2,m=P-s-n,d>v&&(v=i-(p.clientY+s+n),e="down")):"down"==e&&(v=i-(p.clientY+s+n),u=w-f/2,m=P+n,d>v&&(v=p.clientY-s-n,e="up"))}else{var y=o.fn.iPhoto.imgScale(f,s);f=y.width,s=y.height,c=c.hasClass("img-hold")?c.parent(".list-item"):c;var T=c.position().left,x=c.position().top,O=c.width(),M=c.height();v=x-s-n,v>d?(m=x-s-n,u=T+O/2-f/2):(m=x+M+n,u=T+O/2-f/2)}if(d>u?u=d:d>t-(u+f)&&(u=t-f-d),o(h).length){var E=o(h),Y=E.find(r);Y.data("index",c.data("index")).css({top:m,left:u,width:f,height:s}),Y.find(l).attr("src",a),console.log("load")}else o('<div class="iphoto-pop-holder"><div class="iphoto-pop" data-index= "'+c.data("index")+'" style="top: '+m+"px; left: "+u+"px; width: "+f+"px; height: "+s+'px;"><img class="pop-img" src="'+a+'" alt="" /></div></div>').appendTo(o("body")).hide().fadeIn(150)}},o.fn.iPhoto.defaults={MAX_WIDTH:200,MAX_HEIGHT:200,MOUSEMOVE:!1,afterSelected:o.noop}}(jQuery);
//# sourceMappingURL=iphoto-plugin.min.js.map
