/*!
 * iPhoto 0.1.0
 *
 * Github https://github.com/musicq/iphoto
 * @license MIT licensed
 * Copyright (C) 2015 musicq.github.io
 */
!function(o){"use strict";var e,t,i,n=15,d=10,c=o(window),h=(o(document),"iphoto-pop-holder"),a="."+h,f="iphoto-pop",r="."+f,p="pop-img",s="."+p,u="img-hold";c.on("resize",function(){t=c.width(),i=c.height()}),o.fn.iPhoto=function(h){function f(){var n=null;h.MOUSEMOVE?(e="",l.on("mousemove",function(e){t=c.width(),i=c.height(),p(e),o(a).on("mouseenter",function(e){o.fn.iPhoto.removeiphoto()})}),l.on("click",function(e){e=e||window.event;var t=o(e.target||e.srcElement);o.fn.iPhoto.removeiphoto(),o.fn.iPhoto.viewType("PHOTO",t,h.afterSelected)})):(l.on("mousedown",function(d){e="",t=c.width(),i=c.height(),clearTimeout(n),n=setTimeout(function(){p(d)},1e3),l.on("mousemove",function(e){p(e),o(a).on("mouseenter",function(e){o.fn.iPhoto.removeiphoto()}),n&&clearTimeout(n)})}),l.on("mouseup",function(e){l.off("mousemove"),e=e||window.event;var t=o(e.target||e.srcElement);return clearTimeout(n),t.hasClass(u)&&t?(o.fn.iPhoto.removeiphoto(),void o.fn.iPhoto.viewType("PHOTO",t,h.afterSelected)):(o.fn.iPhoto.removeiphoto(),!1)}))}function p(e){e=e||window.event;var t=o(e.target||e.srcElement);if(!t.hasClass(u)||!t)return o.fn.iPhoto.removeiphoto(),!1;src=t.css("background-image").replace(/^url|[\(\)]/g,"");var i=new Image;i.src=src,i.onload=function(){var n=i.width,d=i.height,c=o.fn.iPhoto.imgScale(n,d);n=c.width,d=c.height,o.fn.iPhoto.iphotoPopUp(t,src,n,d,e)}}h=o.extend({},o.fn.iPhoto.defaults,h);var l=o(this);l.length&&f(),o.fn.iPhoto.imgScale=function(o,e,t,i){var n={},d=o/e,c=t||h.MAX_WIDTH,a=i||h.MAX_HEIGHT;return d>1?(d=c/o,o=c,e*=d):(d=a/e,o*=d,e=a),n.width=o,n.height=e,n},o.fn.iPhoto.getMousePoint=function(o){var e={x:0,y:0};return"undefined"!=typeof window.pageYOffset?(e.x=window.pageXOffset,e.y=window.pageYOffset):"undefined"!=typeof document.compatMode&&"BackCompat"!==document.compatMode?(e.x=document.documentElement.scrollLeft,e.y=document.documentElement.scrollTop):"undefined"!=typeof document.body&&(e.x=document.body.scrollLeft,e.y=document.body.scrollTop),e.x+=o.clientX,e.y+=o.clientY,e},o.fn.iPhoto.viewType=function(o,e,t){switch(o){case"YEAR":break;case"MONTH":break;case"DAY":break;case"PHOTO":var i=e.data("index");t(e,i)}},o.fn.iPhoto.removeiphoto=function(){o(a).fadeOut(150,function(){o(a).remove()})},o.fn.iPhoto.iphotoPopUp=function(c,h,f,p,u){var l,m,v;if(u){var w=o.fn.iPhoto.getMousePoint(u),g=w.x,P=w.y;void 0===f&&void 0===p&&void 0===u&&(g=c.position().left,P=c.position().top),(void 0===e||null===e||""===e)&&(v=u.clientY-p-n,d>v?(v=i-(u.clientY+p+n),e="down"):e="up"),"up"==e?(v=u.clientY-p-n,l=g-f/2,m=P-p-n,d>v&&(v=i-(u.clientY+p+n),e="down")):"down"==e&&(v=i-(u.clientY+p+n),l=g-f/2,m=P+n,d>v&&(v=u.clientY-p-n,e="up"))}else{var y=o.fn.iPhoto.imgScale(f,p);f=y.width,p=y.height,c=c.hasClass("img-hold")?c.parent(".list-item"):c;var T=c.position().left,x=c.position().top,O=c.width(),M=c.height();v=x-p-n,v>d?(m=x-p-n,l=T+O/2-f/2):(m=x+M+n,l=T+O/2-f/2)}if(d>l?l=d:d>t-(l+f)&&(l=t-f-d),o(a).length){var E=o(a),Y=E.find(r);Y.data("index",c.data("index")).css({top:m,left:l,width:f,height:p}),Y.find(s).attr("src",h)}else o('<div class="iphoto-pop-holder"><div class="iphoto-pop" data-index= "'+c.data("index")+'" style="top: '+m+"px; left: "+l+"px; width: "+f+"px; height: "+p+'px;"><img class="pop-img" src="'+h+'" alt="" /></div></div>').appendTo(o("body")).hide().fadeIn(150)}},o.fn.iPhoto.defaults={MAX_WIDTH:200,MAX_HEIGHT:200,MOUSEMOVE:!1,afterSelected:o.noop}}(jQuery);
//# sourceMappingURL=iphoto-plugin.min.js.map
