<!doctype html>
<html>
<head>
  <meta charset="UTF-8">
  <title>图片缩放</title>
</head>
<body>

  <script src="./bower_components/jquery/dist/jquery.min.js"></script>
  <script type="text/javascript">
    function imgscale() {
      // 定义最大宽和高为 200
      var MAX_WIDTH = 200,
      MAX_HEIGHT = 200;

      var s_w, s_h;
      var arr = ['http://img5.duitang.com/uploads/item/201510/22/20151022111803_ZVhTi.jpeg',
      'http://cdn.duitang.com/uploads/item/201510/21/20151021051529_M2FEP.jpeg',
      'http://img5.duitang.com/uploads/item/201510/11/20151011111503_ds8mV.jpeg'];
      var img = new Array();
      for(var i=0; i<arr.length; i++){
        img[i] = new Image();
        img[i].src = arr[i];
        img[i].onload = function() {
          var w = this.width,
          h = this.height,
          scale = w/h;

          if (scale > 1) {
            scale = MAX_WIDTH/w;
            console.log(scale);
            s_w = MAX_WIDTH;
            s_h = h * scale;
          } else {
            scale = MAX_HEIGHT/h;
            console.log(scale);
            s_w = w * scale;
            s_h = MAX_HEIGHT;
          }

          console.log(s_h, s_w);

          this.width = s_w;
          this.height = s_h;

          document.body.appendChild(this);
        }
      }
    }
    // document.addEventListener('mousemove', function(e) {
    //     var p = getMousePoint(e);
    //     console.log('x: '+ p.x + '  y: '+ p.y);
    // })
    /**
     * 获取鼠标在页面上的位置
     * @param e 触发的事件
     * @return  x:鼠标在页面上的横向位置, y:鼠标在页面上的纵向位置
     */
    function getMousePoint(e) {
      // 定义鼠标在视窗中的位置
      var point = {
        x:0,
        y:0
      };

      // 如果浏览器支持 pageYOffset, 通过 pageXOffset 和 pageYOffset 获取页面和视窗之间的距离
      if(typeof window.pageYOffset != 'undefined') {
        point.x = window.pageXOffset;
        point.y = window.pageYOffset;
      }
      // 如果浏览器支持 compatMode, 并且指定了 DOCTYPE, 通过 documentElement 获取滚动距离作为页面和视窗间的距离
      // IE 中, 当页面指定 DOCTYPE, compatMode 的值是 CSS1Compat, 否则 compatMode 的值是 BackCompat
      else if(typeof document.compatMode != 'undefined' && document.compatMode != 'BackCompat') {
        point.x = document.documentElement.scrollLeft;
        point.y = document.documentElement.scrollTop;
      }
      // 如果浏览器支持 document.body, 可以通过 document.body 来获取滚动高度
      else if(typeof document.body != 'undefined') {
        point.x = document.body.scrollLeft;
        point.y = document.body.scrollTop;
      }

      // 加上鼠标在视窗中的位置
      point.x += e.clientX;
      point.y += e.clientY;

      // 返回鼠标在视窗中的位置
      return point;
    }
  </script>
</body>
</html>
